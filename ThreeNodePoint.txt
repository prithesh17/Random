# Experiment No: 1
# THREE NODE POINT TO POINT NETWORK
# Aim: Implement three nodes point – to – point network with duplex links between them.
# Set the queue size, vary the bandwidth and find the number of packets dropped.

set ns [new Simulator]
set nf [open lab1.nam w]
$ns namtrace-all $nf
set tf [open lab1.tr w]
$ns trace-all $tf

proc finish { } {
    global ns nf tf
    $ns flush-trace
    close $tf
    close $nf
    exec nam lab1.nam &
    exit 0
}

set n0 [$ns node]
set n2 [$ns node]
set n3 [$ns node]

$ns duplex-link $n0 $n2 200Mb 10ms DropTail
$ns duplex-link $n2 $n3 1Mb 1000ms DropTail
$ns queue-limit $n0 $n2 10

set udp0 [new Agent/UDP]
$ns attach-agent $n0 $udp0

set cbr0 [new Application/Traffic/CBR]
$cbr0 set packetSize_ 500
$cbr0 set interval_ 0.005
$cbr0 attach-agent $udp0

set null0 [new Agent/Null]
$ns attach-agent $n3 $null0
$ns connect $udp0 $null0

$ns at 0.1 "$cbr0 start"
$ns at 1.0 "finish"
$ns run



AWK file: (Open a new editor using “vi command” and write awk file and save with “.awk”
extension)

BEGIN {
    c = 0;
}

{
    if ($1 == "d") {
        c++;
        printf("%s\t%s\n", $5, $11);
    }
}

END {
    printf("The number of packets dropped is %d\n", c);
}



This code implements a simple simulation of a three-node point-to-point network using the NS-2 network simulator. It sets up duplex links between the nodes, configures a UDP agent and a CBR (Constant Bit Rate) traffic application, and sets a queue limit. The AWK script is used to analyze the trace file generated by the simulation to count the number of dropped packets.

Here's a breakdown of what the code does:

1. It defines a simulation using NS-2.
2. Three nodes (n0, n2, and n3) are created.
3. Duplex links are established between the nodes with specified bandwidths and delays.
4. A queue limit is set for one of the links.
5. An UDP agent is attached to node n0.
6. A CBR traffic application is created and attached to the UDP agent.
7. A Null agent is attached to node n3 to receive the traffic.
8. Events are scheduled to start the traffic generation and to finish the simulation.
9. The simulation is run.

The AWK script is used to parse the trace file generated by the simulation and count the number of dropped packets. It prints out the source and destination of dropped packets and then prints the total number of dropped packets at the end.

You would save the AWK script in a separate file with a ".awk" extension and run it on the trace file generated by the NS-2 simulation to analyze the results.
